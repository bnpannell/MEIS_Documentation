<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 5 Data Dictionary for Repository | California Military Economic Impact Study Process Guide</title>
  <meta name="description" content="This GitBook explains the process used to develop the 2020 California Military Economic Impact Study." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 5 Data Dictionary for Repository | California Military Economic Impact Study Process Guide" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This GitBook explains the process used to develop the 2020 California Military Economic Impact Study." />
  <meta name="github-repo" content="bnpannell/MEIS_Documentation" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 5 Data Dictionary for Repository | California Military Economic Impact Study Process Guide" />
  
  <meta name="twitter:description" content="This GitBook explains the process used to develop the 2020 California Military Economic Impact Study." />
  

<meta name="author" content="Britnee Pannell &amp; Sumeet Bedi" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="setup.html"/>
<link rel="next" href="methods.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>



<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">California MEIS Process Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="software.html"><a href="software.html"><i class="fa fa-check"></i><b>2</b> Software Requirements</a>
<ul>
<li class="chapter" data-level="2.1" data-path="software.html"><a href="software.html#libraries"><i class="fa fa-check"></i><b>2.1</b> Download Necessary R Libraries</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data Requirements</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#employment"><i class="fa fa-check"></i><b>3.1</b> Employment Data</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#usa"><i class="fa fa-check"></i><b>3.2</b> USASpending Data</a></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#additional"><i class="fa fa-check"></i><b>3.3</b> Additional Data</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data.html"><a href="data.html#smartpay"><i class="fa fa-check"></i><b>3.3.1</b> SmartPay Data via FOIA</a></li>
<li class="chapter" data-level="3.3.2" data-path="data.html"><a href="data.html#online-data"><i class="fa fa-check"></i><b>3.3.2</b> Data Obtained Online</a></li>
<li class="chapter" data-level="3.3.3" data-path="data.html"><a href="data.html#provided"><i class="fa fa-check"></i><b>3.3.3</b> Data Provided Raw/Self-Made</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>4</b> Setting Up the Repository</a>
<ul>
<li class="chapter" data-level="4.1" data-path="setup.html"><a href="setup.html#get-repo"><i class="fa fa-check"></i><b>4.1</b> Obtain Repository</a></li>
<li class="chapter" data-level="4.2" data-path="setup.html"><a href="setup.html#modify-data"><i class="fa fa-check"></i><b>4.2</b> Modify Data Files</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-dictionary-for-repository.html"><a href="data-dictionary-for-repository.html"><i class="fa fa-check"></i><b>5</b> Data Dictionary for Repository</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-dictionary-for-repository.html"><a href="data-dictionary-for-repository.html#MEIS-folder"><i class="fa fa-check"></i><b>5.1</b> MEIS_Methodology Folder</a></li>
<li class="chapter" data-level="5.2" data-path="data-dictionary-for-repository.html"><a href="data-dictionary-for-repository.html#data-folder"><i class="fa fa-check"></i><b>5.2</b> Data Folder</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="data-dictionary-for-repository.html"><a href="data-dictionary-for-repository.html#raw-folder"><i class="fa fa-check"></i><b>5.2.1</b> Raw Folder</a></li>
<li class="chapter" data-level="5.2.2" data-path="data-dictionary-for-repository.html"><a href="data-dictionary-for-repository.html#temp-folder-temp-folder"><i class="fa fa-check"></i><b>5.2.2</b> Temp Folder {temp-folder}</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-dictionary-for-repository.html"><a href="data-dictionary-for-repository.html#output-folder"><i class="fa fa-check"></i><b>5.3</b> Output Folder</a></li>
<li class="chapter" data-level="5.4" data-path="data-dictionary-for-repository.html"><a href="data-dictionary-for-repository.html#src-folder"><i class="fa fa-check"></i><b>5.4</b> SRC Folder</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-dictionary-for-repository.html"><a href="data-dictionary-for-repository.html#deprecated-folder-deprecated-script"><i class="fa fa-check"></i><b>5.4.1</b> Deprecated Folder {deprecated-script}</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>6</b> Methods</a>
<ul>
<li class="chapter" data-level="6.1" data-path="methods.html"><a href="methods.html#review-p"><i class="fa fa-check"></i><b>6.1</b> Reviewing the Parameters File</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="methods.html"><a href="methods.html#sections-p"><i class="fa fa-check"></i><b>6.1.1</b> Sections of the Parameters File</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="methods.html"><a href="methods.html#review-files"><i class="fa fa-check"></i><b>6.2</b> Reviewing User Specific Files</a></li>
<li class="chapter" data-level="6.3" data-path="methods.html"><a href="methods.html#processing-data"><i class="fa fa-check"></i><b>6.3</b> Processing the Data</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="methods.html"><a href="methods.html#set-up-env"><i class="fa fa-check"></i><b>6.3.1</b> Clearing Environment, and Loading in Packages and Parameters</a></li>
<li class="chapter" data-level="6.3.2" data-path="methods.html"><a href="methods.html#load-functions"><i class="fa fa-check"></i><b>6.3.2</b> Loading in Functions</a></li>
<li class="chapter" data-level="6.3.3" data-path="methods.html"><a href="methods.html#obtain-data"><i class="fa fa-check"></i><b>6.3.3</b> Obtaining the USAspending Data</a></li>
<li class="chapter" data-level="6.3.4" data-path="methods.html"><a href="methods.html#filter-data"><i class="fa fa-check"></i><b>6.3.4</b> Filtering the USAspending Data</a></li>
<li class="chapter" data-level="6.3.5" data-path="methods.html"><a href="methods.html#error-check"><i class="fa fa-check"></i><b>6.3.5</b> Error checking the USAspending Data</a></li>
<li class="chapter" data-level="6.3.6" data-path="methods.html"><a href="methods.html#fix-errors"><i class="fa fa-check"></i><b>6.3.6</b> Manually Fixing Congressional District Errors</a></li>
<li class="chapter" data-level="6.3.7" data-path="methods.html"><a href="methods.html#concat-usa"><i class="fa fa-check"></i><b>6.3.7</b> Concatenating the USAspending Data</a></li>
<li class="chapter" data-level="6.3.8" data-path="methods.html"><a href="methods.html#split-doe"><i class="fa fa-check"></i><b>6.3.8</b> Splitting DOE from USAspending Data</a></li>
<li class="chapter" data-level="6.3.9" data-path="methods.html"><a href="methods.html#filter-doe"><i class="fa fa-check"></i><b>6.3.9</b> Filtering DOE to National Security-Related Data</a></li>
<li class="chapter" data-level="6.3.10" data-path="methods.html"><a href="methods.html#agg-data"><i class="fa fa-check"></i><b>6.3.10</b> Aggregating the Spending Data</a></li>
<li class="chapter" data-level="6.3.11" data-path="methods.html"><a href="methods.html#compile-emp"><i class="fa fa-check"></i><b>6.3.11</b> Compiling Employment Data</a></li>
<li class="chapter" data-level="6.3.12" data-path="methods.html"><a href="methods.html#for-loop"><i class="fa fa-check"></i><b>6.3.12</b> Running For Loops to Generate IMPLAN Activity Sheets</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="methods.html"><a href="methods.html#implan"><i class="fa fa-check"></i><b>6.4</b> Using IMPLAN</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion/ Discussion</a></li>
<li class="chapter" data-level="8" data-path="next.html"><a href="next.html"><i class="fa fa-check"></i><b>8</b> What’s Next?</a></li>
<li class="chapter" data-level="9" data-path="license.html"><a href="license.html"><i class="fa fa-check"></i><b>9</b> License</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">California Military Economic Impact Study Process Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-dictionary-for-repository" class="section level1" number="5">
<h1><span class="header-section-number">Section 5</span> Data Dictionary for Repository</h1>
<p>This section details each file contained in the code repository and a summary of what it is used for in the project. For a more detailed explanation, please see Section <strong><a href="methods.html#methods">6</a></strong>, “Methods.”</p>
<div id="MEIS-folder" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> MEIS_Methodology Folder</h2>
<p>This is the main folder, containing all data in the repository.</p>
<ul>
<li><strong>.gitignore:</strong> Lists files that will be ignored when using Git to synchronize updates to repository.</li>
<li><strong>DEPRECATED_run_analysis_master.R:</strong> This file contains the script used for the 2021 project. This process guide pertains mostly to the code running from this master script.</li>
<li><strong>LICENSE:</strong> Contains licensing information for the repository.</li>
<li><strong>MEIS_Methodology.Rproj:</strong> The R project package used to open the repository in an IDE such as RStudio.</li>
<li><strong>parameters.R:</strong> Contains all variables that may require user editing for code to run properly. Use of this file is documented in the README.md file.</li>
<li><strong>README.md:</strong> The first file you should read in any repository. Contains basic installation instructions, information on the repository contents and guidance on how to use the repository.</li>
<li><strong>.Rhistory:</strong> Contains the history of commands given by a user in an R Session.</li>
<li><strong>run_analysis_master.R:</strong> The newest version of the code to process the Federal data. Currently, this file is in development for the upcoming 2022 version of this project and is not yet ready for use.</li>
</ul>
</div>
<div id="data-folder" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Data Folder</h2>
<p>This is a folder located in the main folder and is designed to hold data for this project.</p>
<div id="raw-folder" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Raw Folder</h3>
<p>This folder is within the data folder and contains all raw data provided to the user. The purpose of the raw data is to simplify data processing.</p>
<ul>
<li><strong>2007_to_2017_NAICS.xlsx:</strong> This file contains the crosswalk used in the master script to update 2007 NAICS codes to 2017 NAICS codes. This file is a new development to automate error checking when linking IMPLAN codes to NAICS codes. It is NOT used in the Deprecated master script.</li>
<li><strong>2012_2017_NAICS_to_IMPLAN.xlsx:</strong> This file contains the 2017 NAICS to IMPLAN crosswalk as well as several additions. 2012 NAICS to IMPLAN values were appended to this file in addition to several 2002 NAICS codes that required updating. This file is a new development to automate error checking when linking IMPLAN codes to NAICS codes. It is NOT used in the Deprecated master script.</li>
<li><strong>business_type_to_implan546_crosswalk.csv:</strong> This file was created to serve as a crosswalk between grant recipient business types and their corresponding IMPLAN codes. This file was made by manually looking up each business type and entering its corresponding IMPLAN code value.</li>
<li><strong>CALIFORNIA_emp.csv:</strong> This file was created to hold employment numbers for selected federal agencies for the state of California. It serves as an example of how to fill out the <strong>“TEMPLATE_emp.csv”</strong> file and to allow for a repeat of the 2021 study.<br />
</li>
<li><strong>contract_recipient_to_district_crosswalk.xlsx:</strong> This file was created to serve as an aid to error checking by assigning a district value to certain contract data that lacked them. Creation of this file involved looking up addresses of businesses with no given district in order to correctly assign a district to the data. It is NOT used in the Deprecated master script.<br />
</li>
<li><strong>dod_county_shares.xlsx:</strong> This file contains the percentage of each county by land area that is assigned to each California congressional district as of 2021.</li>
<li><strong>TEMPLATE_emp.csv:</strong> This file is a template for users to fill out employment numbers for their region of interest. Follow instructions in ([link to MODIFY DATA section]) to make use of this file.</li>
</ul>
<div id="sheets" class="section level4" number="5.2.1.1">
<h4><span class="header-section-number">5.2.1.1</span> Blank_Sheets_for_R Folder</h4>
<p>This folder contains the template spreadsheets used in the final preparation of data for entry into IMPLAN. For more information on the difference between the event types that comprise IMPLAN’s activity sheet, refer to <a href="https://support.implan.com/hc/en-us/articles/360019638713-Explaining-Event-Types">IMPLAN’s article on this topic</a>.</p>
<ul>
<li><strong>CommodityOutput2.xlsx:</strong> An Excel sheet that goes into the IMPLAN activity sheets as the second worksheet tab.</li>
<li><strong>LaborIncomeChange3.xlsx:</strong> An Excel sheet that goes into the IMPLAN activity sheets as the third worksheet tab.</li>
<li><strong>HouseholdSpendingChange4.xlsx:</strong> An Excel sheet that goes into the IMPLAN activity sheets as the fourth worksheet tab. This Excel worksheet tab is what will hold the Veteran Affairs direct payments data.</li>
<li><strong>IndustrySpendingPattern5.xlsx:</strong> An Excel sheet that goes into the IMPLAN activity sheets as the fifth worksheet tab.</li>
<li><strong>InstitutionSpendingPattern6.xlsx:</strong> An Excel sheet that goes into the IMPLAN activity sheets as the sixth worksheet tab.</li>
</ul>
</div>
<div id="deprecated-folder-deprecated-raw" class="section level4" number="5.2.1.2">
<h4><span class="header-section-number">5.2.1.2</span> deprecated Folder {deprecated-raw}</h4>
<p>This folder contains raw data only used by the Deprecated master script.</p>
<ul>
<li><strong>2017_implan_online_naics_to_implan546.xlsx:</strong> This file contains the crosswalk for linking 2017 IMPLAN codes to NAICS code.</li>
<li><strong>2021_employment_totals.xlsx:</strong> This file contains the necessary employment data broken out by each California county and congressional district</li>
</ul>
</div>
</div>
<div id="temp-folder-temp-folder" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Temp Folder {temp-folder}</h3>
<p>This folder is also located within the data folder and holds all files that are made while either master script is running. These files are deleted when the final output is finished being processed.</p>
<ul>
<li><strong>placeholderfortemp.txt:</strong> This file prevents Github from deleting the temp folder, as it is empty by default.</li>
</ul>
</div>
</div>
<div id="output-folder" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Output Folder</h2>
<p>This folder is located within the main folder and holds all the final output files needed by IMPLAN to complete this project. New output files will get created and placed into this folder as scripts are run.</p>
<ul>
<li><strong>placeholder.txt:</strong> This file prevents Github from deleting the output folder, as it is empty by default.</li>
</ul>
</div>
<div id="src-folder" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> SRC Folder</h2>
<p>This folder within the main folder contains all script files needed by the master script when it is running. Scripts in this folder may be used by either of the master scripts contained in this repository. DO NOT MODIFY ANY OF THESE FILES.</p>
<ul>
<li><strong>obtain_usaspending.R:</strong> An R script that calls to USAspending’s Application Programming Interface (API) in order to obtain the USAspending data desired based on the criteria defined in this R script.</li>
<li><strong>filter_usaspending.R:</strong> An R script that defines a function for further filtering the USAspending data that was obtained from the API call.</li>
<li><strong>error_check_and_weight_contracts.R:</strong> An R script that works through multiple steps and lines of code to fix errors in the USAspending contracts data based on the type of error.</li>
<li><strong>error_check_grants.R:</strong> An R script that works through multiple steps and lines of code to fix errors in the USAspending grants data.</li>
<li><strong>concatenate_usaspending.R:</strong> An R script that defines a function for concatenating a certain group of CSVs based on the file name pattern (in this case, the cleaned USAspending data) while ignoring the Veteran Affairs benefits CSV file.</li>
<li><strong>split_usaspending.R:</strong> An R script that defines a function for splitting out Department of Energy spending from the main USAspending data prior to aggregating the spending.</li>
<li><strong>natsec_doe.R:</strong> An R script that filters down the Department of Energy spending to national security-related offices and gives a national security adjustment proportion to use for Energy employment and SmartPay calculations.</li>
<li><strong>aggregate_usaspending.R:</strong> An R script that defines a function for aggregating a defined dataframe’s spending figure (in this study, federal_action_obligation from USAspending data) by IMPLAN code.</li>
<li><strong>generate_employment_dataframe.R:</strong> An R script that calculates employment data and generates two dataframes, one for the county and one for the district IMPLAN sheets.</li>
</ul>
<div id="deprecated-folder-deprecated-script" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Deprecated Folder {deprecated-script}</h3>
<p>This folder within the src folder contains all scripts that are only used by the DEPRECATED_run_analysis_master.R script. DO NOT MODIFY ANY OF THESE FILES.</p>
<ul>
<li><strong>DEPRECATED_error_check_contracts.R:</strong> An R script of hardcode fixes to errors in the contracts data in order to get an IMPLAN code for every entry.</li>
<li><strong>DEPRECATED_error_check_grants.R:</strong> An R script of hardcode fixes to errors in the grants data in order to get an IMPLAN code for every entry.<br />
</li>
<li><strong>DEPRECATED_create_implan_sheets.R:</strong> An R script that runs two for loop codes that help to generate the IMPLAN activity sheets for every California county and congressional district.</li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="setup.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="methods.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/bnpannell/MEIS_Documentation/data_dictionary.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["MEIS_process_guide.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
